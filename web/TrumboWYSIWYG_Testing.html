<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WYSIWYG</title>

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Load WYSIWYG STYLE -->
    <link rel="stylesheet" href="Trumbowyg/dist/ui/trumbowyg.min.css">
    <link rel="stylesheet" href="Trumbowyg/dist/plugins/colors/ui/trumbowyg.colors.min.css">

    <style>
        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            margin-bottom: 10px;
        }

        li {
            margin: 5px;
            padding: 5px;
            width: 100%;
        }
    </style>

</head>

<body>

<h1>WYSIWYG</h1>
<div class="wysiwys" placeholder="Enter some text here"></div>

<h1>ORIGINAL TEXT AREA FOR TYPING STUFF IN</h1>
<textarea id="textarea"></textarea>

<div id="contents" style="border: dashed">
    <ul>
        <li class="ui-state draggable">content</li>
    </ul>

    <ul id="sortable">
    </ul>
</div>

<button onclick="getWYSIWYGcontent()">CLICKY MOI</button>
<button onclick="resetText()">RESET</button>
<button onclick="UpdateText()">Add</button>
</body>

<script>
    var mouse = 0;
    var number = -1;

    function getid() {
        mouse = this.id;
        console.log("section id: " + mouse);
        console.log($(".ui-state-default").eq(mouse).text());
        $('.wysiwys').trumbowyg('html', $(".ui-state-default").eq(mouse).text());
        console.log($('.wysiwys').trumbowyg.html);
    }

    // Binds all input from keystroke inside textarea, runs function - display what's inside textarea in console.log, assign the id to a section inside the contents div
    $('.wysiwys').bind('input', function () {

        var content = $('.wysiwys').trumbowyg('html');
        console.log(content);
        $("#textarea").text(content);
        $("#" + mouse).text(content);
    });

    $(function () {
        $("#sortable").sortable({
            revert: true
        });
        $(".draggable").draggable({
            connectToSortable: "#sortable",
            revert: "invalid"
        });
        $("ul, li").disableSelection();
    });

</script>

<!-- Load WYSIWYG JS -->
<script src="Trumbowyg/dist/trumbowyg.min.js"></script>
<script src="Trumbowyg/dist/plugins/preformatted/trumbowyg.preformatted.min.js"></script>
<script src="Trumbowyg/dist/plugins/colors/trumbowyg.colors.min.js"></script>

<!-- WYSIWYG Implementation -->
<script>
    $('.wysiwys').trumbowyg({
        // Settings
        semantic: true,
        autogrow: true,
        resetCss: true,

        // Buttons
        btnsDef: {
            // Customizables dropdowns
            image: {
                dropdown: ['insertImage', 'upload', 'base64', 'noembed'],
                ico: 'insertImage'
            }
        },
        btns: [
            ['viewHTML'],
            ['undo', 'redo'],
            ['formatting'],
            'btnGrp-design',
//                ['superscript', 'subscript'],
            ['link'],
            ['image'],
            'btnGrp-justify',
            'btnGrp-lists',
            ['foreColor', 'backColor'],
            ['preformatted'],
            ['horizontalRule'],
            ['removeformat'],
            ['fullscreen']
        ]
    });
</script>

<script>
    function resetText() {
        $('.wysiwys').trumbowyg('empty');
    }

    function getWYSIWYGcontent() {
        var content = $('.wysiwys').trumbowyg('html');
        console.log(content);
        number++;
        console.log(number);
        $("#textarea").val($(".ui-state-default").eq(mouse).text());
        var paragraph1 = document.createElement("li");
        paragraph1.className = "ui-state-default ";
        paragraph1.onclick = getid;
//        var paragraph = document.createElement("p");
//        paragraph1.class = "typing";
        paragraph1.id = number;
        $("#sortable").append(paragraph1);
//        $(paragraph1).append(paragraph);
        paragraph1.innerHTML = content;
        console.log($(".ui-state-default "))
        mouse++;
    }
    function UpdateText() {
        mouse = null;
        resetText()
    }
</script>

</html>